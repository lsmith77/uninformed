CREATE TABLE addressees (id BIGINT AUTO_INCREMENT, name VARCHAR(255) NOT NULL, created_at DATETIME, updated_at DATETIME, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 ENGINE = InnoDB;
CREATE TABLE doctrine__record__abstract (id BIGINT AUTO_INCREMENT, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE clauses (clause_id BIGINT AUTO_INCREMENT, name VARCHAR(255) NOT NULL, clause_process BIGINT, clause_number VARCHAR(255) NOT NULL, information_type BIGINT, operative_phrase BIGINT, relevance VARCHAR(255), significants VARCHAR(255), content TEXT, parent_id BIGINT, document_id BIGINT, import_id BIGINT NOT NULL, created_at DATETIME, updated_at DATETIME, INDEX parent_id_idx (parent_id), INDEX clause_process_idx (clause_process), INDEX information_type_idx (information_type), INDEX operative_phrase_idx (operative_phrase), INDEX document_id_idx (document_id), INDEX import_id_idx (import_id), PRIMARY KEY(clause_id)) DEFAULT CHARACTER SET utf8 ENGINE = InnoDB;
CREATE TABLE clause_addressee (clause_id BIGINT, addressee_id BIGINT, created_at DATETIME, updated_at DATETIME, PRIMARY KEY(clause_id, addressee_id)) DEFAULT CHARACTER SET utf8 ENGINE = InnoDB;
CREATE TABLE clauseinformationtypes (id BIGINT AUTO_INCREMENT, label VARCHAR(255) NOT NULL, created_at DATETIME, updated_at DATETIME, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 ENGINE = InnoDB;
CREATE TABLE clauseoperativephrases (id BIGINT AUTO_INCREMENT, label VARCHAR(255) NOT NULL, created_at DATETIME, updated_at DATETIME, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 ENGINE = InnoDB;
CREATE TABLE clauseprocesses (id BIGINT AUTO_INCREMENT, label VARCHAR(255) NOT NULL, created_at DATETIME, updated_at DATETIME, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 ENGINE = InnoDB;
CREATE TABLE clause_tag (clause_id BIGINT, tag_id BIGINT, created_at DATETIME, updated_at DATETIME, PRIMARY KEY(clause_id, tag_id)) DEFAULT CHARACTER SET utf8 ENGINE = InnoDB;
CREATE TABLE documents (document_id BIGINT AUTO_INCREMENT, name VARCHAR(255) NOT NULL, publication_date DATE, adoption_date DATE NOT NULL, code VARCHAR(255), min_ratification_count INT, preamble TEXT, parent_id BIGINT, organisation_id BIGINT, documenttype_id BIGINT, documenturl TEXT, import_id BIGINT NOT NULL, created_at DATETIME, updated_at DATETIME, INDEX parent_id_idx (parent_id), INDEX organisation_id_idx (organisation_id), INDEX documenttype_id_idx (documenttype_id), INDEX import_id_idx (import_id), PRIMARY KEY(document_id)) DEFAULT CHARACTER SET utf8 ENGINE = InnoDB;
CREATE TABLE documentrelations (id BIGINT AUTO_INCREMENT, relation_type VARCHAR(255) NOT NULL, document_left_hand BIGINT NOT NULL, document_right_hand BIGINT NOT NULL, created_at DATETIME, updated_at DATETIME, INDEX document_right_hand_idx (document_right_hand), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 ENGINE = InnoDB;
CREATE TABLE document_tag (document_id BIGINT, tag_id BIGINT, created_at DATETIME, updated_at DATETIME, PRIMARY KEY(document_id, tag_id)) DEFAULT CHARACTER SET utf8 ENGINE = InnoDB;
CREATE TABLE documenttypes (documenttype_id BIGINT AUTO_INCREMENT, name VARCHAR(255) NOT NULL, legalvalue_id BIGINT, created_at DATETIME, updated_at DATETIME, INDEX legalvalue_id_idx (legalvalue_id), PRIMARY KEY(documenttype_id)) DEFAULT CHARACTER SET utf8 ENGINE = InnoDB;
CREATE TABLE excelfiles (id BIGINT AUTO_INCREMENT, name VARCHAR(255) NOT NULL, tag_id BIGINT NOT NULL, author VARCHAR(255) NOT NULL, file VARCHAR(255) NOT NULL, import_id BIGINT, is_imported TINYINT(1), created_at DATETIME, updated_at DATETIME, INDEX tag_id_idx (tag_id), INDEX import_id_idx (import_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 ENGINE = InnoDB;
CREATE TABLE imports (id BIGINT AUTO_INCREMENT, created_at DATETIME, updated_at DATETIME, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 ENGINE = InnoDB;
CREATE TABLE legalvalues (legalvalue_id BIGINT AUTO_INCREMENT, name VARCHAR(255) NOT NULL, created_at DATETIME, updated_at DATETIME, PRIMARY KEY(legalvalue_id)) DEFAULT CHARACTER SET utf8 ENGINE = InnoDB;
CREATE TABLE memberstates (memberstate_id BIGINT AUTO_INCREMENT, name VARCHAR(255), created_at DATETIME, updated_at DATETIME, PRIMARY KEY(memberstate_id)) DEFAULT CHARACTER SET utf8 ENGINE = InnoDB;
CREATE TABLE memberstatesorganisations (id BIGINT AUTO_INCREMENT, join_date DATE NOT NULL, leave_date DATE, memberstate_id BIGINT, organisation_id BIGINT, created_at DATETIME, updated_at DATETIME, INDEX memberstate_id_idx (memberstate_id), INDEX organisation_id_idx (organisation_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 ENGINE = InnoDB;
CREATE TABLE organisations (organisation_id BIGINT AUTO_INCREMENT, name VARCHAR(255) NOT NULL, parent_id BIGINT, created_at DATETIME, updated_at DATETIME, INDEX parent_id_idx (parent_id), PRIMARY KEY(organisation_id)) DEFAULT CHARACTER SET utf8 ENGINE = InnoDB;
CREATE TABLE tags (tag_id BIGINT AUTO_INCREMENT, name VARCHAR(255) NOT NULL, tag_type VARCHAR(255) NOT NULL, created_at DATETIME, updated_at DATETIME, PRIMARY KEY(tag_id)) DEFAULT CHARACTER SET utf8 ENGINE = InnoDB;
CREATE TABLE taghierarchies (taghierarchie_id BIGINT AUTO_INCREMENT, name VARCHAR(255) NOT NULL, hierarchie_level VARCHAR(255), parent_id BIGINT, created_at DATETIME, updated_at DATETIME, INDEX parent_id_idx (parent_id), PRIMARY KEY(taghierarchie_id)) DEFAULT CHARACTER SET utf8 ENGINE = InnoDB;
CREATE TABLE tag_hierarchie_tag (taghierarchie_id BIGINT, tag_id BIGINT, created_at DATETIME, updated_at DATETIME, PRIMARY KEY(taghierarchie_id, tag_id)) DEFAULT CHARACTER SET utf8 ENGINE = InnoDB;
CREATE TABLE tagimplications (id BIGINT AUTO_INCREMENT, implication_type VARCHAR(255) NOT NULL, tag_left_hand BIGINT NOT NULL, tag_right_hand BIGINT NOT NULL, created_at DATETIME, updated_at DATETIME, INDEX tag_right_hand_idx (tag_right_hand), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 ENGINE = InnoDB;
CREATE TABLE votes (vote_id BIGINT AUTO_INCREMENT, label VARCHAR(255), document_id BIGINT, memberstate_id BIGINT, created_at DATETIME, updated_at DATETIME, INDEX document_id_idx (document_id), INDEX memberstate_id_idx (memberstate_id), PRIMARY KEY(vote_id)) DEFAULT CHARACTER SET utf8 ENGINE = InnoDB;
CREATE TABLE sf_guard_group (id INT AUTO_INCREMENT, name VARCHAR(255) UNIQUE, description TEXT, created_at DATETIME, updated_at DATETIME, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sf_guard_group_permission (group_id INT, permission_id INT, created_at DATETIME, updated_at DATETIME, PRIMARY KEY(group_id, permission_id)) ENGINE = INNODB;
CREATE TABLE sf_guard_permission (id INT AUTO_INCREMENT, name VARCHAR(255) UNIQUE, description TEXT, created_at DATETIME, updated_at DATETIME, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sf_guard_remember_key (id INT AUTO_INCREMENT, user_id INT, remember_key VARCHAR(32), ip_address VARCHAR(50), created_at DATETIME, updated_at DATETIME, INDEX user_id_idx (user_id), PRIMARY KEY(id, ip_address)) ENGINE = INNODB;
CREATE TABLE sf_guard_user (id INT AUTO_INCREMENT, username VARCHAR(128) NOT NULL UNIQUE, algorithm VARCHAR(128) DEFAULT 'sha1' NOT NULL, salt VARCHAR(128), password VARCHAR(128), is_active TINYINT(1) DEFAULT '1', is_super_admin TINYINT(1) DEFAULT '0', last_login DATETIME, created_at DATETIME, updated_at DATETIME, INDEX is_active_idx_idx (is_active), PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE sf_guard_user_group (user_id INT, group_id INT, created_at DATETIME, updated_at DATETIME, PRIMARY KEY(user_id, group_id)) ENGINE = INNODB;
CREATE TABLE sf_guard_user_permission (user_id INT, permission_id INT, created_at DATETIME, updated_at DATETIME, PRIMARY KEY(user_id, permission_id)) ENGINE = INNODB;
ALTER TABLE clauses ADD FOREIGN KEY (parent_id) REFERENCES clauses(clause_id);
ALTER TABLE clauses ADD FOREIGN KEY (operative_phrase) REFERENCES clauseoperativephrases(id);
ALTER TABLE clauses ADD FOREIGN KEY (information_type) REFERENCES clauseinformationtypes(id);
ALTER TABLE clauses ADD FOREIGN KEY (import_id) REFERENCES imports(id);
ALTER TABLE clauses ADD FOREIGN KEY (document_id) REFERENCES documents(document_id);
ALTER TABLE clauses ADD FOREIGN KEY (clause_process) REFERENCES clauseprocesses(id);
ALTER TABLE clause_addressee ADD FOREIGN KEY (clause_id) REFERENCES clauses(clause_id);
ALTER TABLE clause_tag ADD FOREIGN KEY (clause_id) REFERENCES clauses(clause_id);
ALTER TABLE documents ADD FOREIGN KEY (parent_id) REFERENCES documents(document_id);
ALTER TABLE documents ADD FOREIGN KEY (organisation_id) REFERENCES organisations(organisation_id);
ALTER TABLE documents ADD FOREIGN KEY (import_id) REFERENCES imports(id);
ALTER TABLE documents ADD FOREIGN KEY (documenttype_id) REFERENCES documenttypes(documenttype_id);
ALTER TABLE documentrelations ADD FOREIGN KEY (document_right_hand) REFERENCES documents(document_id);
ALTER TABLE document_tag ADD FOREIGN KEY (document_id) REFERENCES documents(document_id);
ALTER TABLE documenttypes ADD FOREIGN KEY (legalvalue_id) REFERENCES legalvalues(legalvalue_id);
ALTER TABLE excelfiles ADD FOREIGN KEY (tag_id) REFERENCES tags(tag_id);
ALTER TABLE excelfiles ADD FOREIGN KEY (import_id) REFERENCES imports(id);
ALTER TABLE memberstatesorganisations ADD FOREIGN KEY (organisation_id) REFERENCES organisations(organisation_id);
ALTER TABLE memberstatesorganisations ADD FOREIGN KEY (memberstate_id) REFERENCES memberstates(memberstate_id);
ALTER TABLE organisations ADD FOREIGN KEY (parent_id) REFERENCES organisations(organisation_id);
ALTER TABLE taghierarchies ADD FOREIGN KEY (parent_id) REFERENCES taghierarchies(taghierarchie_id);
ALTER TABLE tag_hierarchie_tag ADD FOREIGN KEY (taghierarchie_id) REFERENCES taghierarchies(taghierarchie_id);
ALTER TABLE tag_hierarchie_tag ADD FOREIGN KEY (tag_id) REFERENCES tags(tag_id);
ALTER TABLE tagimplications ADD FOREIGN KEY (tag_right_hand) REFERENCES tags(tag_id);
ALTER TABLE votes ADD FOREIGN KEY (memberstate_id) REFERENCES memberstates(memberstate_id);
ALTER TABLE votes ADD FOREIGN KEY (document_id) REFERENCES documents(document_id);
ALTER TABLE sf_guard_group_permission ADD FOREIGN KEY (permission_id) REFERENCES sf_guard_permission(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_group_permission ADD FOREIGN KEY (group_id) REFERENCES sf_guard_group(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_remember_key ADD FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_group ADD FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_group ADD FOREIGN KEY (group_id) REFERENCES sf_guard_group(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_permission ADD FOREIGN KEY (user_id) REFERENCES sf_guard_user(id) ON DELETE CASCADE;
ALTER TABLE sf_guard_user_permission ADD FOREIGN KEY (permission_id) REFERENCES sf_guard_permission(id) ON DELETE CASCADE;
